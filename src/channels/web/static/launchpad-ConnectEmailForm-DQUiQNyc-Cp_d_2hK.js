import{r as i,j as e}from"./launchpad.js";import{dy as P,d6 as T,d4 as L,dn as M,e0 as A,d5 as D,d8 as I,d9 as R,e1 as U,dq as $,e2 as N}from"./launchpad-App-CJN8YHj9.js";import{V as W,m as q}from"./launchpad-ModalHeader-JjfRejxC-CtYe7KE2.js";import{n as F}from"./launchpad-Chip-D2-wZOHJ-BUhC-lY9.js";import{t as V,a as _}from"./launchpad-EmailInputForm-Dgoii4vf-C3j96MW0.js";import{e as K}from"./launchpad-ErrorMessage-D8VaAP5m-BxUDDoNF.js";import{M as O}from"./launchpad-mail-C5wDGb2q.js";const ae=i.forwardRef((n,S)=>{let[a,x]=i.useState(n.defaultValue||""),[t,m]=i.useState(""),[l,p]=i.useState(!1),{authenticated:y}=P(),{initLoginWithEmail:h}=T(),{navigate:o,setModalData:d,currentScreen:E,data:s}=L(),{enabled:v,token:g}=M(),[b,j]=i.useState(!1),{accountType:k}=A(),w=D();i.useEffect(()=>{!a&&w.disablePlusEmails&&s?.inlineError?.error instanceof I&&s?.inlineError?.error.privyErrorCode===R.DISALLOWED_PLUS_EMAIL&&!t&&m("Please enter a valid email address without a '+'."),t&&m("")},[a]);let C=U(a),f=l||!C,c=()=>{var r;d({login:s?.login,inlineError:void 0}),!v||g||y?(r=g,p(!0),h({email:a,captchaToken:r,disableSignup:s?.login?.disableSignup,withPrivyUi:!0}).then(()=>{o("AwaitingPasswordlessCodeScreen")}).catch(u=>{d({errorModalData:{error:u,previousScreen:E||"LandingScreen"}}),o("ErrorScreen")}).finally(()=>{p(!1)})):(d({captchaModalData:{callback:u=>h({email:a,captchaToken:u,withPrivyUi:!0}),userIntentRequired:!1,onSuccessNavigateTo:"AwaitingPasswordlessCodeScreen",onErrorNavigateTo:"ErrorScreen"}}),o("CaptchaScreen"))};return e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[t&&e.jsx(K,{style:{display:"block",marginTop:"0.25rem",textAlign:"left"},children:t}),e.jsxs(z,{stacked:n.stacked,$error:!!t,children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsx("input",{ref:S,id:"email-input",className:"login-method-button",type:"email",placeholder:"your@email.com",onFocus:()=>j(!0),onChange:r=>x(r.target.value),onKeyUp:r=>{r.key==="Enter"&&c()},value:a,autoComplete:"email"}),k!=="email"||b?n.stacked?e.jsx("span",{}):e.jsx(W,{isSubmitting:l,onClick:c,disabled:f,children:"Submit"}):e.jsx(F,{color:"gray",children:"Recent"})]})]}),n.stacked?e.jsx(q,{loadingText:null,loading:l,disabled:f,onClick:c,style:{width:"100%"},children:"Submit"}):null]})});let H=V,z=_,B=$(N)`
  display: inline-flex;
`;export{ae as C};
