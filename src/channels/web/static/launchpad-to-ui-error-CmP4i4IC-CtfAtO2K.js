import{r as a,j as e}from"./launchpad.js";import{E as V,l as p,s as H,x as v,c as T,d as g,V as L,b as f,w as b,F as B,T as E,p as F,u as Y}from"./launchpad-PinInput-3SLvbnQa-CovKtgDb.js";import{F as q}from"./launchpad-FingerPrintIcon-CpCeQsPn.js";import{F as A}from"./launchpad-PhoneIcon-C1ddPHdQ.js";import{F as I}from"./launchpad-ShieldCheckIcon-CP_2fGKU.js";import{T as y,m as U,g as m,$ as S}from"./launchpad-ModalHeader-JjfRejxC-gvXxgADS.js";import{n as W}from"./launchpad-ScreenLayout-Ca6ml9wY-CeAdm0Km.js";import{d6 as C,dW as z,d5 as D,eA as u,e2 as j,eT as J,eU as K,eV as N,da as O,er as X,eu as G,cU as Q,dq as Z}from"./launchpad-App-D179iYht.js";import{F as _}from"./launchpad-ExclamationTriangleIcon-DS9jnCFw.js";import{i as ee}from"./launchpad-StackedContainer-B2vaEl56-DAGpnjTg.js";import{c as re}from"./launchpad-useGetTokenPrice-PWP-Uiot-DSryU3xF.js";import{$ as se}from"./launchpad-TransactionDetails-DkPozym_-DJ9OmnKi.js";function ne({title:s,titleId:r,...n},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const oe=a.forwardRef(ne),fe=({handleClose:s,mfaMethods:r,onSelect:n})=>e.jsxs(W,{title:"Verify your identity",subtitle:"Choose a verification method",icon:I,iconVariant:"subtle",onClose:s,showClose:!0,watermark:!0,children:[e.jsxs(Y,{children:[r.includes("totp")&&e.jsxs(u,{onClick:()=>n("totp"),children:[e.jsx(j,{children:e.jsx(B,{})}),"Authenticator app"]},"totp"),r.includes("sms")&&e.jsxs(u,{onClick:()=>n("sms"),children:[e.jsx(j,{children:e.jsx(A,{})}),"SMS"]},"sms"),r.includes("passkey")&&e.jsxs(u,{onClick:()=>n("passkey"),children:[e.jsx(j,{children:e.jsx(q,{})}),"Passkey"]},"passkey")]}),e.jsx(m,{})]}),k=({pendingTransaction:s})=>{let{wallets:r}=O(),{walletProxy:n,rpcConfig:o,chains:i,appId:c,nativeTokenSymbolForChainId:d}=C(),[t,R]=a.useState(null),[l,$]=a.useState(s),{tokenPrice:M}=re(l.chainId),P=d(s.chainId)||"ETH",h=a.useMemo(()=>r.find(x=>x.walletClientType==="privy"),[r]);return a.useEffect(()=>{(async function(){if(!n||!h)return l;let x=X(l.chainId,i,o,{appId:c}),w=await G(l,x,h.address);return R(Q(BigInt(w.gas??0))),w})().then($).catch(console.error)},[n]),h?e.jsx(te,{children:e.jsx(se,{from:h.address,to:l.to,txn:l,gas:t??void 0,tokenPrice:M,tokenSymbol:P})}):null};let te=Z.div`
  width: 100%;
  padding: 1rem 0;
`;const ye=({hasBlockingError:s,error:r,onClose:n,onBack:o,handleSubmit:i,account:c,submitSuccess:d})=>{let{pendingTransaction:t}=C();return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:n},"header"),e.jsx(ee,{children:e.jsxs("div",{children:[e.jsx(z,{success:d,fail:!!r}),e.jsx(r?_:V,{style:{width:"38px",height:"38px"}})]})}),e.jsx(p,{style:{marginTop:"1rem"},children:"Verifying with passkey"}),e.jsxs(H,{children:[e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(I,{})}),"Approve this action using your touch, face, PIN, or hardware key."]}),e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(oe,{})}),"You last added a passkey on"," ",c?.firstVerifiedAt?.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),"."]})]}),t&&e.jsx(g,{children:e.jsx(k,{pendingTransaction:t})}),r&&e.jsxs(e.Fragment,{children:[e.jsx(L,{style:{marginTop:"1.25rem"},children:r.message}),e.jsx(U,{disabled:s,onClick:i,style:{margin:"1.25rem auto 0"},children:"Try again"})]}),o&&e.jsx(f,{style:{marginTop:"1rem"},onClick:o,children:"Choose another method"}),e.jsx(m,{})]})},ke=({selectedMethod:s,submitSuccess:r,hasBlockingError:n,onClose:o,onBack:i,handleSubmitCode:c})=>{let d=D(),{pendingTransaction:t}=C();switch(s){case"sms":return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:o},"header"),e.jsx(b,{style:{marginBottom:"1.5rem"},children:e.jsx(A,{})}),e.jsx(p,{children:"Enter verification code"}),e.jsxs(g,{children:[e.jsx(E,{success:r,disabled:n,onChange:c}),e.jsxs(F,{children:["To continue, please enter the 6-digit code sent to your ",e.jsx("strong",{children:"mobile device"})]}),t&&e.jsx(k,{pendingTransaction:t})]}),i&&e.jsx(f,{theme:d?.appearance.palette.colorScheme,onClick:i,children:"Choose another method"}),e.jsx(S,{onClick:o,children:"Cancel"}),e.jsx(m,{})]});case"totp":return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:o},"header"),e.jsx(b,{style:{marginBottom:"1.5rem"},children:e.jsx(B,{})}),e.jsx(p,{children:"Enter verification code"}),e.jsxs(g,{children:[e.jsx(E,{success:r,disabled:n,onChange:c}),e.jsxs(F,{children:["To continue, please enter the 6-digit code generated from your"," ",e.jsx("strong",{children:"authenticator app"})]}),t&&e.jsx(k,{pendingTransaction:t})]}),i&&e.jsx(f,{theme:d?.appearance.palette.colorScheme,onClick:i,children:"Choose another method"}),e.jsx(S,{onClick:o,children:"Cancel"}),e.jsx(m,{})]});default:return null}},Ce=s=>J(s)?{isBlocking:!0,error:Error("You have exceeded the maximum number of attempts. Please close this window and try again in 10 seconds.")}:K(s)?{isBlocking:!1,error:Error("The code you entered is not valid")}:N(s)?{isBlocking:!0,error:Error("You have exceeded the time limit for code entry. Please try again in 30 seconds.")}:(console.error(s),{isBlocking:!1,error:Error("Something went wrong.")});export{ye as K,ke as R,Ce as X,fe as q};
