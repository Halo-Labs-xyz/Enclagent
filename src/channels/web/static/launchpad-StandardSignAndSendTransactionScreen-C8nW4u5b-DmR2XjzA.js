import{r as $,j as u}from"./launchpad.js";import{f5 as Q,f6 as ot,f7 as st,f8 as ct,d4 as dt,d6 as lt,d5 as ut,dy as pt,f9 as mt,dT as ft,fa as gt,fb as Z,fc as ht,ev as yt,dq as tt,fd as wt,fe as kt,ff as bt,fg as At}from"./launchpad-App-CJN8YHj9.js";import{t as xt}from"./launchpad-useGetSolPrice-DwwjjGbd-BEBGHXwL.js";import{ErrorScreenView as St}from"./launchpad-ErrorScreen-V8ec2dKP-D_hRhYgC.js";import{F as vt}from"./launchpad-CheckCircleIcon-D2sCnQx5.js";import{T as It,u as Ot,m as Tt}from"./launchpad-ModalHeader-JjfRejxC-CtYe7KE2.js";import{s as jt}from"./launchpad-Layouts-BlFm53ED-C7q8tWPJ.js";import{o as $t}from"./launchpad-ScreenHeader-CHmc4-Lu-B284yZ5R.js";import{t as Ct,s as D,e as U,n as J}from"./launchpad-Value-tcJV9e0L-D71e5n-9.js";import{f as G,v as _t}from"./launchpad-WalletLink-B12jNftF-piDAEyat.js";import{i as Et}from"./launchpad-StackedContainer-B2vaEl56-s1vNZunq.js";import{n as Lt,Y as Ft}from"./launchpad-TransactionErrorView-f1bQRoCZ-C8Jwa7RN.js";import{t as K}from"./launchpad-transaction-CnfuREWo-BX0tihxo.js";import{d as Pt,c as nt,l as Bt,u as Rt,f as Dt}from"./launchpad-useSolanaRpcClient-ign2YXAl-CIko8pHi.js";import{C as Ut,e as Jt,n as Mt,a as M,o as qt,d as Nt,r as Wt,t as zt}from"./launchpad-getFormattedUsdFromLamports-B6EqSEho-C-HCdwKa.js";import{i as E}from"./launchpad-formatters-Ci5UKeAj.js";import"./launchpad-reservoir-0wfhnc0j-CPufrqb_.js";import"./launchpad-ScreenLayout-Ca6ml9wY-tWBwodfe.js";import"./launchpad-Screen-DE3ldE_X-Bg_Q5Z_h.js";import"./launchpad-index-Dq_xe9dz-DPq0PTtR.js";import"./launchpad-createLucideIcon-BSOjrqRH.js";import"./launchpad-lock-DOKCRgid.js";import"./launchpad-LoadingSkeleton-U6-3yFwI-C2YhYO2U.js";import"./launchpad-ethers-VWEScvge-CDamq4Ed.js";import"./launchpad-ErrorMessage-D8VaAP5m-BxUDDoNF.js";import"./launchpad-LabelXs-oqZNqbm_-UAiqAEGh.js";import"./launchpad-Subtitle-CV-2yKE4-DzKjSC5T.js";import"./launchpad-Title-BnzYV3Is-D2KM1MN-.js";import"./launchpad-Address-D-q_5it9-CEPVIheL.js";import"./launchpad-check-C5kCRahI.js";import"./launchpad-copy-DYa4Op8P.js";import"./launchpad-WalletInfoCard-CuZCmvHw-CXLpfV91.js";import"./launchpad-shared-FM0rljBt-DH-prbl1.js";import"./launchpad-Checkbox-BhNoOKjX-DH1QEOI4.js";import"./launchpad-ErrorBanner-CQERa7bL-DglzmpVC.js";import"./launchpad-ExclamationCircleIcon-DuVuT9M1.js";import"./launchpad-WarningBanner-c8L53pJ2-Di6f77Un.js";import"./launchpad-ExclamationTriangleIcon-DS9jnCFw.js";import"./launchpad-ChevronDownIcon-D09uGFR6.js";function Ht(t){return!("exists"in t)||"exists"in t&&t.exists}function Vt(t){const e=t.filter(n=>Ht(n)&&n.data instanceof Uint8Array);if(e.length>0){const n=e.map(a=>a.address);throw new Q(ot,{addresses:n})}}function Yt(t,e){if(!e)return Object.freeze({address:t,exists:!1});const n=ct().encode(e.data[0]);return Object.freeze({...et(e),address:t,data:n,exists:!0})}function Kt(t,e){if(!e)return Object.freeze({address:t,exists:!1});const n=e.data.parsed.info||{};return(e.data.program||e.data.parsed.type)&&(n.parsedAccountMeta={program:e.data.program,type:e.data.parsed.type}),Object.freeze({...et(e),address:t,data:n,exists:!0})}function et(t){return Object.freeze({executable:t.executable,lamports:t.lamports,programAddress:t.owner,space:t.space})}async function Xt(t,e,n={}){const{abortSignal:a,...r}=n;return(await t.getMultipleAccounts(e,{...r,encoding:"jsonParsed"}).send({abortSignal:a})).value.map((l,s)=>l&&typeof l=="object"&&"parsed"in l.data?Kt(e[s],l):Yt(e[s],l))}function Gt(t){const e=t.filter(n=>!n.exists);if(e.length>0){const n=e.map(a=>a.address);throw new Q(st,{addresses:n})}}async function Qt(t,e,n){if(t.length===0)return{};const a=await Xt(e,t,n);return Vt(a),Gt(a),a.reduce((r,o)=>({...r,[o.address]:o.data.addresses}),{})}const Zt=tt.span`
  && {
    width: 82px;
    height: 82px;
    border-width: 4px;
    border-style: solid;
    border-color: ${t=>t.color??"var(--privy-color-accent)"};
    background-color: ${t=>t.color??"var(--privy-color-accent)"};
    border-radius: 50%;
    display: inline-block;
    box-sizing: border-box;
  }
`,tn=({instruction:t,fees:e,transactionInfo:n,solPrice:a,chain:r})=>u.jsxs(Ct,{children:[n?.action&&u.jsxs(D,{children:[u.jsx(U,{children:"Action"}),u.jsx(J,{children:n.action})]}),t?.total!=null&&u.jsxs(D,{children:[u.jsx(U,{children:"Total"}),u.jsx(J,{children:t.total})]}),!t?.total&&t?.amount!=null&&u.jsxs(D,{children:[u.jsx(U,{children:"Total"}),u.jsx(J,{children:u.jsx(G,{quantities:[t.amount,e],tokenPrice:a})})]}),u.jsxs(D,{children:[u.jsx(U,{children:"Fees"}),u.jsx(J,{children:u.jsx(G,{quantities:[e],tokenPrice:a})})]}),t?.to&&u.jsxs(D,{children:[u.jsx(U,{children:"To"}),u.jsx(J,{children:u.jsx(_t,{walletAddress:t.to,chainId:r,chainType:"solana"})})]})]}),nn=({fees:t,onClose:e,receiptHeader:n,receiptDescription:a,transactionInfo:r,solPrice:o,signOnly:l,instruction:s,chain:p})=>u.jsxs(u.Fragment,{children:[u.jsx(It,{onClose:e}),u.jsx(Et,{style:{marginBottom:"16px"},children:u.jsxs("div",{children:[u.jsx(Zt,{color:"var(--privy-color-success-light)"}),u.jsx(vt,{height:38,width:38,strokeWidth:2,stroke:"var(--privy-color-success)"})]})}),u.jsx($t,{title:n??`Transaction ${l?"signed":"complete"}!`,description:a??"You're all set."}),u.jsx(tn,{solPrice:o,instruction:s,fees:t,transactionInfo:r,chain:p}),u.jsx(yt,{}),u.jsx(en,{loading:!1,onClick:e,children:"Close"}),u.jsx(jt,{}),u.jsx(Ot,{})]});let en=tt(Tt)`
  && {
    margin-top: 24px;
  }
  transition:
    color 350ms ease,
    background-color 350ms ease;
`;async function B(t,e){try{return await t}catch{return e}}function an(t){switch(t){case"solana:mainnet":return"mainnet-beta";case"solana:devnet":return"devnet";case"solana:testnet":return"testnet"}}async function C({privyClient:t,chain:e,mint:n}){let a=zt[e];if(!a[n]){let r=await t.getSplTokenMetadata({mintAddress:n,cluster:an(e)});r&&(a[n]={address:n,symbol:r.symbol,decimals:r.decimals})}return a[n]}async function rn({tx:t,solanaClient:e,privyClient:n,checkFunds:a}){var L,f;let r=Z().decode(nt(t)),o=r.staticAccounts[0]??"",l=await Bt({solanaClient:e,tx:t}),s=a?await B(Rt({solanaClient:e,tx:t})):void 0,p=s?.hasFunds??!0,w={},m=[],A=await async function({solanaClient:k,message:g}){if(!("addressTableLookups"in g)||!g.addressTableLookups)return[...g.staticAccounts];let d=g.addressTableLookups.map(x=>x.lookupTableAddress),v=await Qt(d,k.rpc),j=d.map((x,O)=>[...g.addressTableLookups[O]?.writableIndexes.map(I=>{let _=v[x]?.[I];if(_)return{key:_,isWritable:!0,altIdx:O}})??[],...g.addressTableLookups[O]?.readonlyIndexes.map(I=>{let _=v[x]?.[I];if(_)return{key:_,isWritable:!1,altIdx:O}})??[]]).flat().filter(x=>!!x).sort((x,O)=>x.isWritable!==O.isWritable?x.isWritable?-1:1:x.altIdx-O.altIdx).map(({key:x})=>x);return[...g.staticAccounts,...j]}({solanaClient:e,message:r});for(let k of r.instructions){let g=r.staticAccounts[k.programAddressIndex]||"";if(g!==Jt&&g!==Mt)if(g!==M){if(g===qt){let d=await B(function(v,j,x){let[O,I,_,F]=v.accountIndices?.map(q=>j[q])??[];return{type:"ata-creation",program:x,payer:O,ata:I,owner:_,mint:F}}(k,A,g));if(!d){m.push({type:"unknown",program:g,discriminator:k.data?.[0]});continue}if(m.push(d),d.ata&&d.owner&&d.mint){w[d.ata]={owner:d.owner,mint:d.mint};continue}}if(Nt.includes(g)){let d=await B(cn(k,A,e,n,g));if(!d){m.push({type:"unknown",program:g,discriminator:k.data?.[0]});continue}m.push(d)}else if(Wt.includes(g)){let d=await B(dn(k,A,e,n,g));if(!d){m.push({type:"unknown",program:g,discriminator:k.data?.[0]});continue}m.push(d)}else m.push({type:"unknown",program:g,discriminator:k.data?.[0]})}else{let d=await B(sn(k,A));if(!d){m.push({type:"unknown",program:g,discriminator:k.data?.[0]});continue}m.push(d)}else{let d=await B(on(k,A,e,n,w,g));if(!d){m.push({type:"unknown",program:g,discriminator:k.data?.[0]});continue}m.push(d),d.type==="spl-transfer"&&(d.fromAta&&d.fromAccount&&d.token.address&&(w[L=d.fromAta]??(w[L]={owner:d.fromAccount,mint:d.token.address})),d.toAta&&d.toAccount&&d.token.address&&(w[f=d.toAta]??(w[f]={owner:d.toAccount,mint:d.token.address})))}}return{spender:o,fee:l,instructions:m,hasFunds:!!p}}function S(t,e=0){try{return function(a,r=0){let o=0n;for(let l=0;l<8;l++)o|=BigInt(a[r+l])<<BigInt(8*l);return o}(t,e)}catch{}try{return t.readBigInt64LE(e)}catch{}let n=Dt(t);try{return((a,r=0)=>{let o=a[r],l=a[r+7];if(!o||!l)throw Error(`Buffer offset out of range: first: ${o}, last: ${l}.`);return(BigInt(a[r+4]+256*a[r+5]+65536*a[r+6]+(l<<24))<<32n)+BigInt(o+256*a[++r]+65536*a[++r]+16777216*a[++r])})(n)}catch{}try{return n.subarray(e).readBigInt64LE()}catch{}try{return n.readBigInt64LE(e)}catch{}return 0n}async function on(t,e,n,a,r,o){let l=t.data?.[0],s=t.accountIndices?.map(p=>e[p])??[];if(l===1){let[p,w,m]=s;return{type:"spl-init-account",program:o,account:p,mint:w,owner:m}}if(l===3){let p,w,[m,A,L]=s,f="",k=A?r[A]:void 0;if(k)p=k.owner,f=k.mint;else if(A){let v=await n.rpc.getAccountInfo(A,{commitment:"confirmed",encoding:"jsonParsed"}).send(),j=v.value?.data;p=j?.parsed?.info?.owner,f=j?.parsed?.info?.mint??"",w=j?.parsed?.info?.tokenAmount?.decimals}!f&&m&&(f=(await n.rpc.getAccountInfo(m,{commitment:"confirmed",encoding:"jsonParsed"}).send()).value?.data?.parsed?.info?.mint??"");let g=await C({privyClient:a,chain:n.chain,mint:f}),d=g?.symbol??"";return w??(w=g?.decimals??9),{type:"spl-transfer",program:o,fromAta:m,fromAccount:L,toAta:A,toAccount:p,value:S(t.data,1),token:{symbol:d,decimals:w,address:f}}}if(l===9){let[p,w,m]=s;return{type:"spl-close-account",program:o,source:p,destination:w,owner:m}}if(l===17)return{type:"spl-sync-native",program:o};throw Error(`Token program instruction type ${l} not supported`)}async function sn(t,e){let n=t.data?.[0],a=t.accountIndices?.map(r=>e[r])??[];if(n===0){let[,r]=a;return{type:"create-account",program:M,account:r?.toString(),value:S(t.data,4),withSeed:!1}}if(n===2){let[r,o]=a;return{type:"sol-transfer",program:M,fromAccount:r,toAccount:o,token:{symbol:"SOL",decimals:9},value:S(t.data,4),withSeed:!1}}if(n===3){let[,r]=a;return{type:"create-account",program:M,account:r,withSeed:!0,value:S(t.data.slice(t.data.length-32-8-8))}}if(n===11){let[r,o]=a;return{type:"sol-transfer",program:M,fromAccount:r,toAccount:o,value:S(t.data,4),token:{symbol:"SOL",decimals:9},withSeed:!0}}throw Error(`System program instruction type ${n} not supported`)}async function cn(t,e,n,a,r){let o=t.accountIndices?.map(s=>e[s])??[],l=t.data?.[0];if(l===143){let s=o[10],p=o[11];return{type:"raydium-swap-base-input",program:r,mintIn:s,mintOut:p,tokenIn:s?await C({privyClient:a,chain:n.chain,mint:s}):void 0,tokenOut:p?await C({privyClient:a,chain:n.chain,mint:p}):void 0,amountIn:S(t.data,8),minimumAmountOut:S(t.data,16)}}if(l===55){let s=o[10],p=o[11];return{type:"raydium-swap-base-output",program:r,mintIn:s,mintOut:p,tokenIn:s?await C({privyClient:a,chain:n.chain,mint:s}):void 0,tokenOut:p?await C({privyClient:a,chain:n.chain,mint:p}):void 0,maxAmountIn:S(t.data,8),amountOut:S(t.data,16)}}throw Error(`Raydium swap program instruction type ${l} not supported`)}async function dn(t,e,n,a,r){let o=t.data?.[0],l=t.accountIndices?.map(s=>e[s])??[];if([208,51,239,151,123,43,237,92].includes(o)){let s=l[5],p=l[6];return{type:"jupiter-swap-exact-out-route",program:r,mintIn:s,mintOut:p,tokenIn:s?await C({privyClient:a,chain:n.chain,mint:s}):void 0,tokenOut:p?await C({privyClient:a,chain:n.chain,mint:p}):void 0,outAmount:S(t.data,t.data.length-1-2-8-8),quotedInAmount:S(t.data,t.data.length-1-2-8)}}if([176,209,105,168,154,125,69,62].includes(o)){let s=l[7],p=l[8];return{type:"jupiter-swap-exact-out-route",program:r,mintIn:s,mintOut:p,tokenIn:s?await C({privyClient:a,chain:n.chain,mint:s}):void 0,tokenOut:p?await C({privyClient:a,chain:n.chain,mint:p}):void 0,outAmount:S(t.data,t.data.length-1-2-8-8),quotedInAmount:S(t.data,t.data.length-1-2-8)}}if([193,32,155,51,65,214,156,129].includes(o)){let s=l[7],p=l[8];return{type:"jupiter-swap-shared-accounts-route",program:r,mintIn:s,mintOut:p,tokenIn:s?await C({privyClient:a,chain:n.chain,mint:s}):void 0,tokenOut:p?await C({privyClient:a,chain:n.chain,mint:p}):void 0,inAmount:S(t.data,t.data.length-1-2-8-8),quotedOutAmount:S(t.data,t.data.length-1-2-8)}}throw[62,198,214,193,213,159,108,210].includes(o)&&console.warn("Jupiter swap program instruction 'claim' not implemented"),[116,206,27,191,166,19,0,73].includes(o)&&console.warn("Jupiter swap program instruction 'claim_token' not implemented"),[26,74,236,151,104,64,183,249].includes(o)&&console.warn("Jupiter swap program instruction 'close_token' not implemented"),[229,194,212,172,8,10,134,147].includes(o)&&console.warn("Jupiter swap program instruction 'create_open_orders' not implemented"),[28,226,32,148,188,136,113,171].includes(o)&&console.warn("Jupiter swap program instruction 'create_program_open_orders' not implemented"),[232,242,197,253,240,143,129,52].includes(o)&&console.warn("Jupiter swap program instruction 'create_token_ledger' not implemented"),[147,241,123,100,244,132,174,118].includes(o)&&console.warn("Jupiter swap program instruction 'create_token_account' not implemented"),[229,23,203,151,122,227,173,42].includes(o)&&console.warn("Jupiter swap program instruction 'route' not implemented"),[150,86,71,116,167,93,14,104].includes(o)&&console.warn("Jupiter swap program instruction 'route_with_token_ledger' not implemented"),[228,85,185,112,78,79,77,2].includes(o)&&console.warn("Jupiter swap program instruction 'set_token_ledger' not implemented"),[230,121,143,80,119,159,106,170].includes(o)&&console.warn("Jupiter swap program instruction 'shared_accounts_route_with_token_ledger' not implemented"),Error(`Jupiter swap program instruction type ${o} not supported`)}const Kn={component:()=>{let{data:t,onUserCloseViaDialogOrKeybindRef:e,setModalData:n,navigate:a}=dt(),{client:r,closePrivyModal:o,walletProxy:l,showFiatPrices:s}=lt(),p=ut(),{user:w}=pt(),m=Pt()(t?.standardSignAndSendTransaction?.chain??"solana:mainnet"),[A,L]=$.useState(t?.standardSignAndSendTransaction?.transaction),[f,k]=$.useState(),[g,d]=$.useState(),[v,j]=$.useState({value:0n,isLoading:!1}),[x,O]=$.useState(!1),[I,_]=$.useState({}),[F,q]=$.useState(),T=t?.standardSignAndSendTransaction?.account,z=!!t?.standardSignAndSendTransaction?.signOnly,at=T?.imported?mt(w).find(c=>c.address===T.address):ft(w),{solPrice:N,isSolPriceLoading:H}=xt({enabled:s}),R=$.useMemo(()=>{if(!f)return;let c=f.spender,h=K(f.fee),y=K(v.value,3,!0),b=f.instructions.filter(P=>["sol-transfer","spl-transfer","raydium-swap-base-input","raydium-swap-base-output","jupiter-swap-shared-accounts-route","jupiter-swap-exact-out-route"].includes(P.type)),i=b.at(0);return!i||b.length>1?{fee:h,spender:c,balance:y}:i.type==="sol-transfer"?{fee:h,spender:c,balance:y,total:K(i.value)}:i.type==="spl-transfer"?{fee:h,spender:c,balance:y,total:`${E({amount:i.value,decimals:i.token.decimals})} ${i.token.symbol}`}:i.type==="raydium-swap-base-input"&&i.tokenIn&&i.tokenOut?{fee:h,spender:c,balance:y,swap:`${`${E({amount:i.amountIn,decimals:i.tokenIn.decimals})} ${i.tokenIn.symbol}`} → ${`${E({amount:i.minimumAmountOut,decimals:i.tokenOut.decimals})} ${i.tokenOut.symbol}`}`}:i.type==="raydium-swap-base-output"&&i.tokenIn&&i.tokenOut?{fee:h,spender:c,balance:y,swap:`${`${E({amount:i.maxAmountIn,decimals:i.tokenIn.decimals})} ${i.tokenIn.symbol}`} → ${`${E({amount:i.amountOut,decimals:i.tokenOut.decimals})} ${i.tokenOut.symbol}`}`}:i.type==="jupiter-swap-shared-accounts-route"&&i.tokenIn&&i.tokenOut?{fee:h,spender:c,balance:y,swap:`${`${E({amount:i.inAmount,decimals:i.tokenIn.decimals})} ${i.tokenIn.symbol}`} → ${`${E({amount:i.quotedOutAmount,decimals:i.tokenOut.decimals})} ${i.tokenOut.symbol}`}`}:i.type==="jupiter-swap-exact-out-route"&&i.tokenIn&&i.tokenOut?{fee:h,spender:c,balance:y,swap:`${`${E({amount:i.quotedInAmount,decimals:i.tokenIn.decimals})} ${i.tokenIn.symbol}`} → ${`${E({amount:i.outAmount,decimals:i.tokenOut.decimals})} ${i.tokenOut.symbol}`}`}:{fee:h,spender:c,balance:y}},[f,T?.address,v]),V=$.useMemo(()=>{let c;if(!f||!s||!N||H)return;function h(...i){return Ut(i.reduce((P,it)=>P+it,0n),N??0)}T?.address===f.spender&&(c=h(f.fee));let y=h(v.value),b=f.instructions.filter(i=>i.type==="sol-transfer"||i.type==="spl-transfer").at(0);return!b||f.instructions.length>1?{fee:c,balance:y}:b.type==="sol-transfer"?{fee:c,balance:y,total:h(b.value,T?.address===f.spender?f.fee:0n)}:b.type==="spl-transfer"?{fee:c,balance:y,total:`${E({amount:b.value,decimals:b.token.decimals})} ${b.token.symbol}`}:{fee:c,balance:y}},[f,s,N,H,T?.address,v]);if($.useEffect(()=>{(async function(){if(A&&r)try{d(void 0);let c=await rn({tx:A,solanaClient:m,privyClient:r,checkFunds:!z});k(c)}catch(c){console.error("Failed to prepare transaction",c),d(c)}})()},[A,m,r,z]),$.useEffect(()=>{(async function(){if(!T)return;j({value:v.value,isLoading:!0});let{value:c}=await m.rpc.getBalance(T.address,{commitment:"confirmed"}).send();j({value:c??0n,isLoading:!1})})().catch(console.error)},[f]),!A||!t?.standardSignAndSendTransaction||!T){let c=Error("Invalid transaction request");return u.jsx(St,{error:c,allowlistConfig:p.allowlistConfig,onRetry:()=>{t?.standardSignAndSendTransaction?.onFailure(c),o({shouldCallAuthOnSuccess:!1})}})}let W=()=>{if(!x)return I.signature||I.signedTransaction?t?.standardSignAndSendTransaction?.onSuccess({signature:I.signature,signedTransaction:I.signedTransaction}):t?.standardSignAndSendTransaction?.onFailure(F??g??Error("User exited the modal before submitting the transaction")),o({shouldCallAuthOnSuccess:!1})};e.current=W;let rt=t.standardSignAndSendTransaction?.uiOptions?.transactionInfo?.contractInfo?.imgUrl?u.jsx("img",{src:t.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgUrl,alt:t.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgAltText}):null,Y=!!(t.funding&&t.funding.supportedOptions.length>0),X=!f?.hasFunds&&Y;if(I.signature||I.signedTransaction){let c=f?.instructions.filter(y=>y.type==="sol-transfer"||y.type==="spl-transfer"),h=c?.length===1?c?.at(0):void 0;return u.jsx(nn,{fees:I.fees??0n,onClose:W,transactionInfo:t.standardSignAndSendTransaction?.uiOptions.transactionInfo,solPrice:N,receiptHeader:t.standardSignAndSendTransaction?.uiOptions.successHeader,receiptDescription:t.standardSignAndSendTransaction?.uiOptions.successDescription,chain:m.chain,signOnly:z,instruction:h?.type==="sol-transfer"?{to:h.toAccount,amount:h.value}:{to:h?.toAccount||h?.toAta,total:R?.total}})}return F?u.jsx(Lt,{transactionError:F,chainId:m.chain,onClose:W,chainType:"solana",onRetry:async()=>{q(void 0);let{value:c}=await m.rpc.getLatestBlockhash().send();var h,y;L((h=A,y=c,gt(Z().decode(nt(h)),b=>At(b),b=>bt(y,b),b=>kt(b),b=>new Uint8Array(wt().encode(b)))))}}):u.jsx(Ft,{img:rt,title:t.standardSignAndSendTransaction?.uiOptions?.transactionInfo?.title||"Confirm transaction",subtitle:t.standardSignAndSendTransaction?.uiOptions?.description||`${p.name} wants your permission to approve the following transaction.`,cta:X?"Add funds":t.standardSignAndSendTransaction?.uiOptions?.buttonText||"Approve",instructions:f?.instructions??[],network:m.chain=="solana:mainnet"?"Solana":m.chain.replace("solana:",""),blockExplorerUrl:m.blockExplorerUrl,total:s?V?.total:R?.total,fee:s?V?.fee:R?.fee,balance:s?V?.balance:R?.balance,swap:R?.swap,transactingWalletAddress:T.address,disabled:!f?.hasFunds&&!Y,isSubmitting:x,isPreparing:!f||v.isLoading,isTokenPriceLoading:s&&H,isMissingFunds:!f?.hasFunds,submitError:F??void 0,isSponsored:!!t.standardSignAndSendTransaction?.isSponsored,parseError:g,onClick:X?async()=>{if(!T)return;if(!Y)throw Error("Funding wallet is not enabled");let c="FundingMethodSelectionScreen";n({...t,funding:{...t.funding,methodScreen:c},solanaFundingData:t?.solanaFundingData}),a(c)}:async()=>{try{if(O(!0),x||!T||!l||!w||!at)return;let c=await t.standardSignAndSendTransaction.onConfirm(A);if("signature"in c){let h=await async function({solanaClient:y,signature:b}){let i=ht().decode(b),P=await y.rpc.getTransaction(i,{maxSupportedTransactionVersion:0,commitment:"confirmed",encoding:"base64"}).send().catch(()=>null);return P?{fee:P.meta?.fee??0n}:null}({solanaClient:m,signature:c.signature});return void _({...c,fees:h?.fee})}_(c)}catch(c){console.warn({transaction:A,error:c}),q(c)}finally{O(!1)}},onClose:W})}};export{Kn as StandardSignAndSendTransactionScreen,Kn as default};
