import{r as n,j as e}from"./launchpad.js";import{F as R}from"./launchpad-LockClosedIcon-BqF5SfBd.js";import{T as O,u as b,F as E,m as P}from"./launchpad-ModalHeader-JjfRejxC-gvXxgADS.js";import{d4 as W,dy as M,d5 as I,d6 as $,dT as L,eA as l,eW as B,dq as D}from"./launchpad-App-D179iYht.js";import{o as v}from"./launchpad-ScreenHeader-CHmc4-Lu-Bz0hvEfr.js";import{o as G,d as U,e as q,p as H}from"./launchpad-styles-BsotlekN-DPqfrMat.js";function T({title:o,titleId:s,...c},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},c),o?n.createElement("title",{id:s},o):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const Y=n.forwardRef(T);let d=D.div`
  width: 24px;
  height: 24px;
  display: flex;
  justify-content: center;
  align-items: center;
`,V={"google-drive":"Google Drive",icloud:"iCloud","user-passcode":"password",privy:"Privy","privy-v2":"Privy"},K=({onClose:o})=>e.jsxs(H,{children:[e.jsx(v,{title:"Why do I need to secure my account?",icon:e.jsx(E,{width:48}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Your app uses cryptography to secure your account. App secrets are split and encrypted so only you can access them."}),e.jsx("p",{children:"To use this app on new devices, secure account secrets using a password, your Google or your Apple account. It’s important you don’t lose access to the method you choose."})]})}),e.jsx(P,{onClick:o,children:"Select backup method"})]});const _={component:()=>{let[o,s]=n.useState(!1),{navigate:c,lastScreen:a,navigateBack:x,setModalData:m,data:i,onUserCloseViaDialogOrKeybindRef:g}=W(),{user:j}=M(),{embeddedWallets:f}=I(),{closePrivyModal:w}=$(),t=L(j),u=t===null,{isInAccountCreateFlow:C,isResettingPassword:S,shouldCreateEth:k,shouldCreateSol:A}=i.recoverySelection,h=t&&t.recoveryMethod!=="privy",F=h?e.jsxs("span",{children:["Your account is currently secured using"," ",e.jsx("strong",{children:V[t?.recoveryMethod||"user-passcode"]}),"."]}):"Select a method for logging in on new devices and recovering your account.";function p(r){m({recoveryOAuthStatus:{provider:r,action:u?"create-wallet":"set-recovery",isInAccountCreateFlow:C,shouldCreateEth:k,shouldCreateSol:A}}),c("RecoveryOAuthScreen")}function y(){i?.setWalletPassword?.onFailure(Error("User exited set recovery flow")),w({shouldCallAuthOnSuccess:i?.setWalletPassword?.callAuthOnSuccessOnClose??!1})}return g.current=y,e.jsxs(e.Fragment,{children:[e.jsx(O,{onClose:y,backFn:o?()=>s(!1):a?x:void 0,infoFn:a||o?void 0:()=>s(!0)},"header"),o?e.jsx(K,{onClose:()=>s(!1)}):e.jsxs(e.Fragment,{children:[e.jsx(v,{title:h?"Update backup method":"Secure your account",icon:e.jsx(R,{width:48}),description:F}),e.jsx(G,{children:f.userOwnedRecoveryOptions.filter(r=>!["icloud","google-drive"].includes(t?.recoveryMethod||"")||r!==t?.recoveryMethod).sort().map(r=>{switch(r){case"google-drive":return e.jsxs(l,{onClick:()=>p("google-drive"),children:[e.jsx(d,{children:e.jsx(q,{style:{width:18}})}),"Back up to Google Drive"]},r);case"icloud":return e.jsxs(l,{onClick:()=>p("icloud"),children:[e.jsx(d,{children:e.jsx(U,{style:{width:24}})}),"Back up to Apple iCloud"]},r);case"user-passcode":return e.jsxs(l,{onClick:()=>{c(B({isCreatingWallet:u,skipSplashScreen:!0}))},children:[e.jsx(d,{children:e.jsx(Y,{style:{width:18}})}),S?"Reset your":"Set a"," password"]},r);default:return null}})})]}),e.jsx(b,{})]})}};export{_ as RecoverySelectionScreen,_ as default};
