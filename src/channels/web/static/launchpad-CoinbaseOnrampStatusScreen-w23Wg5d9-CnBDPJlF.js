import{r as c,j as e}from"./launchpad.js";import{F as v}from"./launchpad-ArrowsRightLeftIcon-B31GRfZT.js";import{F as x}from"./launchpad-CheckCircleIcon-BvqP64EM.js";import{d4 as b,d6 as j,dq as p,dr as w,ds as F,dt as C}from"./launchpad-App-CJN8YHj9.js";import{T as S,u as k,m as I}from"./launchpad-ModalHeader-JjfRejxC-CtYe7KE2.js";import{a as D}from"./launchpad-Layouts-BlFm53ED-C7q8tWPJ.js";import{t as M}from"./launchpad-analytics-mkkvFRju-DOXuftJB.js";const z={component:()=>{let{data:r,setModalData:t,navigate:n,navigateBack:a}=b(),{closePrivyModal:i,createAnalyticsEvent:l,client:h}=j(),[d,u]=c.useState("pending-in-flow"),m=c.useRef(0),o={...r?.funding,showAlternateFundingMethod:!0};o.usingDefaultFundingMethod&&(o.usingDefaultFundingMethod=!1);let{partnerUserId:g,popup:f}=r?.coinbaseOnrampStatus??{};return c.useEffect(()=>{if(d==="pending-in-flow"||d==="pending-after-flow"){let y=setInterval(async()=>{if(g)try{let{status:s}=await h.getCoinbaseOnRampStatus({partnerUserId:g});if(s==="success")return void u("success");if(s==="failure")throw Error("There was an error completing Coinbase Onramp flow.");if(m.current>=3)return t({funding:o,solanaFundingData:r?.solanaFundingData}),void n("FundingMethodSelectionScreen");f?.closed&&(m.current=m.current+1,u("pending-after-flow"))}catch(s){console.error(s),u("error"),l({eventName:M,payload:{status:"failure",provider:"coinbase-onramp",error:s.message}}),t({funding:{...o,errorMessage:"Something went wrong adding funds. Please try again or use another method."},solanaFundingData:r?.solanaFundingData}),n("FundingMethodSelectionScreen")}},1500);return()=>clearInterval(y)}},[g,f,d]),e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Fund account",backFn:()=>{t({funding:o,solanaFundingData:r?.solanaFundingData}),a()}},"header"),e.jsx(R,{status:d,onClickCta:i}),e.jsx(k,{})]})}};let R=({status:r,onClickCta:t})=>{let{title:n,body:a,cta:i}=c.useMemo(()=>(l=>{switch(l){case"success":return{title:"You've funded your account!",body:"It may take a few minutes for the assets to appear.",cta:"Continue"};case"pending-after-flow":return{title:"In Progress",body:"Almost done. Retrieving transaction status from Coinbase",cta:""};case"error":case"pending-in-flow":return{title:"In Progress",body:"Go back to Coinbase Onramp to finish funding your account.",cta:""}}})(r),[r]);return e.jsxs(e.Fragment,{children:[e.jsxs(P,{children:[e.jsx(E,{isSucccess:r==="success"}),e.jsxs(D,{children:[e.jsx("h3",{children:n}),e.jsx(O,{children:a})]})]}),i&&e.jsx(I,{onClick:t,children:i})]})},E=({isSucccess:r})=>{if(!r){let a="var(--privy-color-foreground-4)";return e.jsxs("div",{style:{position:"relative"},children:[e.jsx(w,{color:a,style:{position:"absolute"}}),e.jsx(F,{color:a}),e.jsx(C,{style:{position:"absolute",width:"2.8rem",height:"2.8rem",top:"1.2rem",left:"1.2rem"}})]})}let t=r?x:()=>e.jsx(v,{width:"3rem",height:"3rem",style:{backgroundColor:"var(--privy-color-foreground-4)",color:"var(--privy-color-background)",borderRadius:"100%",padding:"0.5rem",margin:"0.5rem"}}),n=r?"var(--privy-color-success)":"var(--privy-color-foreground-4)";return e.jsx("div",{style:{borderColor:n,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"100%",borderWidth:2,padding:"0.5rem",marginBottom:"0.5rem"},children:t&&e.jsx(t,{width:"4rem",height:"4rem",color:n})})},O=p.p`
  font-size: 1rem;
  color: var(--privy-color-foreground-3);
  margin-bottom: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
`,P=p.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin-left: 1.75rem;
  margin-right: 1.75rem;
  padding: 2rem 0;
`;export{z as CoinbaseOnrampStatusScreen,z as default};
