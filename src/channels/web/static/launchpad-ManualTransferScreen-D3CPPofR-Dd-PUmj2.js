import{r as i,j as a}from"./launchpad.js";import{m as Y,u as q}from"./launchpad-ModalHeader-JjfRejxC-CtYe7KE2.js";import{d as H}from"./launchpad-Layouts-BlFm53ED-C7q8tWPJ.js";import{C as K}from"./launchpad-QrCode-VCBMkqqq-CccYvGLK.js";import{t as W}from"./launchpad-FundWalletMethodHeader-DRH4o4R5-WL1628h4.js";import{i as G}from"./launchpad-InfoBanner-DkQEPd77-BZ0gBA_1.js";import{r as J}from"./launchpad-Subtitle-CV-2yKE4-DzKjSC5T.js";import{e as Q}from"./launchpad-Title-BnzYV3Is-D2KM1MN-.js";import{j as V}from"./launchpad-WalletInfoCard-CuZCmvHw-CXLpfV91.js";import{da as X,d6 as I,ec as Z,d4 as _,d5 as ee,de as b,dc as re,bY as f,ed as ae}from"./launchpad-App-CJN8YHj9.js";import{s as ne}from"./launchpad-useWalletBalance-CDyi5_iR-CyTmk2cZ.js";import{t as D}from"./launchpad-analytics-mkkvFRju-DOXuftJB.js";import{e as se}from"./launchpad-getChainName-DjpPdUSc-c2urPd0g.js";import{r as h}from"./launchpad-getUsdcMintAddress-DFI1hv05-DwqfiN48.js";import{t as te}from"./launchpad-transaction-CnfuREWo-BX0tihxo.js";import{n as ie}from"./launchpad-getErc20Balance-DA4dGV9O-CmHoS_yx.js";import{i as w,t as oe}from"./launchpad-formatters-Ci5UKeAj.js";import"./launchpad-dijkstra-D_NXgYpA.js";import"./launchpad-ErrorMessage-D8VaAP5m-BxUDDoNF.js";import"./launchpad-LabelXs-oqZNqbm_-UAiqAEGh.js";import"./launchpad-Address-D-q_5it9-CEPVIheL.js";import"./launchpad-check-C5kCRahI.js";import"./launchpad-createLucideIcon-BSOjrqRH.js";import"./launchpad-copy-DYa4Op8P.js";import"./launchpad-shared-FM0rljBt-DH-prbl1.js";import"./launchpad-getFormattedUsdFromLamports-B6EqSEho-C-HCdwKa.js";const Be={component:()=>{let{wallets:d}=X(),{connectors:A}=I(),F=A.filter(Z).flatMap(s=>s.wallets),{data:c,setModalData:M,navigate:k,lastScreen:U}=_(),{rpcConfig:g,appId:C,createAnalyticsEvent:v,closePrivyModal:E}=I(),y=ee(),[r,l]=i.useState(void 0),[B,S]=i.useState(!1),e=c?.funding,{reloadBalance:O}=ne({rpcConfig:g,appId:C,address:e.chainType==="ethereum"?e.address:void 0,chain:e.chainType==="ethereum"?e.chain:void 0}),o=e.chainType==="solana",m=o?e.isUSDC?"USDC":"SOL":e.erc20Address?e.erc20ContractInfo?.symbol:e.chain.nativeCurrency.symbol,$=o?F.find(({address:s})=>s===e.address):d.find(({address:s})=>b(s)===b(e.address));if(!e)return M({errorModalData:{error:Error("Couldn't find funding config"),previousScreen:U||"FundingMethodSelectionScreen"},funding:c?.funding,solanaFundingData:c?.solanaFundingData,sendTransaction:c?.sendTransaction}),k("ErrorScreen"),a.jsx(a.Fragment,{});i.useEffect(()=>{let s=o?async function(){if(e.chainType!=="solana")return;let n=y.solanaRpcs[e.chain];n?(e.isUSDC?async function({rpc:p,address:t,mintAddress:z}){let P=await p.getTokenAccountsByOwner(t,{mint:z},{encoding:"jsonParsed",commitment:"confirmed"}).send(),j=P.value[0]?.account;return j?BigInt(j.data.parsed.info.tokenAmount.amount):0n}({rpc:n.rpc,address:e.address,mintAddress:h(e.chain)}):re({rpc:n.rpc,address:e.address})).then(p=>{let t=BigInt(p);r&&t>r&&(S(!0),v({eventName:D,payload:{provider:"manual",status:"success",chainType:"solana",address:$?.address,value:e.isUSDC?f(t-r,6):f(t-r,9),token:e.isUSDC?"USDC":"SOL"}})),l(t)}):console.warn("Unable to load solana rpc, skipping balance")}:async function(){e.chainType==="ethereum"&&(async()=>{if(!e.erc20Address)return await O()??BigInt(0);{let{balance:n}=await ie({chain:e.chain,address:e.address,erc20Address:e.erc20Address,rpcConfig:g,appId:C});return n}})().then(n=>{r&&n>r&&(S(!0),v({eventName:D,payload:{provider:"manual",status:"success",chainType:"ethereum",address:$?.address,chainId:e.chain.id,value:f(n-r,e.erc20ContractInfo?.decimals??18),token:e.erc20ContractInfo?.symbol??e.erc20Address??"ETH"}})),l(n)}).catch(()=>l(void 0))},R=setInterval(s,2e3);return s(),()=>clearInterval(R)},[r]);let L=i.useMemo(()=>r==null?"":e.isUSDC?w({amount:r,decimals:6}):o?te(r,3,!0,!0):e.erc20ContractInfo?.decimals!=null?w({amount:r,decimals:e.erc20ContractInfo.decimals}):oe({wei:r}),[r,o,e]),u=e.chainType==="ethereum"?e.chain.name:se(e.chain),x=i.useMemo(()=>e.uiConfig?.receiveFundsTitle===""?null:a.jsx(Q,{children:e.uiConfig?.receiveFundsTitle??`Receive ${e.amount} ${m??""}`.trim()}),[e.uiConfig?.receiveFundsTitle,e.amount,m]),T=i.useMemo(()=>e.uiConfig?.receiveFundsSubtitle===""?null:a.jsx(J,{children:e.uiConfig?.receiveFundsSubtitle??`Scan this code or copy your wallet address to receive funds on ${u}.`}),[e.uiConfig?.receiveFundsSubtitle,u]),N=e.chainType==="solana"&&e.isUSDC&&h(e.chain)?`?spl-token=${h(e.chain)}`:"";return a.jsxs(a.Fragment,{children:[a.jsx(W,{}),x,T,a.jsxs(H,{style:{gap:"1rem",margin:x||T?"1rem 0":"0"},children:[a.jsx(K,{url:`${e.chainType}:${e.address}${N}`,size:200,squareLogoElement:ce}),a.jsxs(G,{theme:y.appearance.palette.colorScheme,children:["Make sure to send funds on ",u,"."]}),a.jsx(V,{title:"Your wallet",errMsg:void 0,showCopyButton:!0,balance:`${L} ${m}`,address:e.address}),B&&a.jsx(Y,{onClick:()=>E({shouldCallAuthOnSuccess:!1,isSuccess:!0}),children:"Continue"})]}),a.jsx(q,{})]})}};let ce=({...d})=>a.jsx(ae,{color:"black",...d});export{Be as ManualTransferScreen,Be as default};
