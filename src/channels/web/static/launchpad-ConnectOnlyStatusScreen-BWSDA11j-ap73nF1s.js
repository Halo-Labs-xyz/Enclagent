import{r as m,j as y}from"./launchpad.js";import{d4 as M,d6 as W,db as j,du as R,dv as D,dw as U,dx as $}from"./launchpad-App-D179iYht.js";import{n as L}from"./launchpad-ScreenLayout-Ca6ml9wY-CeAdm0Km.js";import{getErrorDetails as N}from"./launchpad-ConnectionStatusScreen-DC1viuqC-BE62Zj59.js";import"./launchpad-ModalHeader-JjfRejxC-gvXxgADS.js";import"./launchpad-Screen-DE3ldE_X-BBf8NvvX.js";import"./launchpad-index-Dq_xe9dz-bxbF5Mdc.js";import"./launchpad-Link-DJ5gq9Di-Bcmw2lMR.js";import"./launchpad-useI18n-BdIAB9oU-W7UAn9Rw.js";import"./launchpad-shouldProceedtoEmbeddedWalletCreationFlow-BsPl2jCD-BqPojStS.js";const O=({walletLogo:c,success:r,errorMessage:a,title:w,subtitle:p,onRetry:l,onUseDifferentWallet:d,onBack:e,numRetries:i,maxRetries:t})=>y.jsx(L,{title:w,subtitle:p,icon:c,iconVariant:"loading",iconLoadingStatus:{success:r,fail:!!a},primaryCta:a===$.ERROR_USER_EXISTS?{label:"Use a different wallet",onClick:d}:!r&&a?.retryable&&i<t?{label:"Retry",onClick:l,disabled:!a?.retryable||i>=t}:!r&&a&&i>=t?{label:"Use a different wallet",onClick:d}:void 0,onBack:e,watermark:!0}),H={component:()=>{let c,{navigateBack:r,navigate:a,lastScreen:w,currentScreen:p,data:l,setModalData:d}=M(),{walletConnectionStatus:e,closePrivyModal:i}=W(),[t,C]=m.useState(void 0),[f,T]=m.useState(0),g=j(e?.connector?.walletClientType||"unknown"),s=e?.status==="connected",k=e?.status==="switching_to_supported_chain";m.useEffect(()=>{if(s){let o;if(l?.externalConnectWallet?.onCompleteNavigateTo){let E=l.externalConnectWallet.onCompleteNavigateTo,h=e.connectedWallet?.address;o=setTimeout(()=>{if(l.funding&&e.connector){let _=e.connector.wallets.find(B=>B.address===h);d({...l,funding:{...l.funding,connectedWallet:_}})}a(E({address:h,walletClientType:e.connector?.walletClientType,walletChainType:e.connector?.chainType}))},R)}else o=setTimeout(i,R);return()=>clearTimeout(o)}},[s]),m.useEffect(()=>{var o;e?.connectError&&(o=e?.connectError,C(N(o)))},[e]);let b=e?.connector?.connectorType||"injected",S=e?.connector?.walletClientType||"unknown",u=g?.metadata?.shortName||g?.name||e?.connector?.walletBranding.name||"Browser Extension",v=g?.image_url?.md||e?.connector?.walletBranding.icon||(o=>y.jsx(D,{...o})),x=u==="Browser Extension"?u.toLowerCase():u;c=s?`Successfully connected with ${x}`:t?t.message:k?"Switching networks":`Waiting for ${x}`;let n="Don’t see your wallet? Check your other browser windows.";return s?n="You’re good to go!":f>=2&&t?n="Unable to connect wallet":t?n=t.detail:k?n="Switch your wallet to the requested network.":S==="metamask"&&U?n="Click to continue to open and connect MetaMask.":S==="metamask"?n="For the best experience, connect only one wallet at a time.":b==="wallet_connect_v2"?n="Open your mobile wallet app to continue":b==="coinbase_wallet"&&(n="Confirm in the Coinbase app/popup to continue."),y.jsx(O,{walletName:u,walletLogo:v,success:s,errorMessage:t,title:c,subtitle:n,onRetry:()=>{T(f+1),C(void 0),e?.connectRetry()},onUseDifferentWallet:r,onBack:p===w?void 0:r,numRetries:f,maxRetries:2})}};export{H as ConnectOnlyStatusScreen,O as ConnectOnlyStatusScreenView,H as default};
