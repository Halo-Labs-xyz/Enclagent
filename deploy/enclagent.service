[Unit]
Description=Enclagent AI Assistant
After=cloud-sql-proxy.service docker.service
Requires=cloud-sql-proxy.service

[Service]
Type=simple
ExecStartPre=/usr/bin/docker pull us-central1-docker.pkg.dev/enclagent-prod/enclagent/agent:latest
ExecStart=/usr/bin/docker run --rm \
  --name enclagent \
  --env-file /opt/enclagent/.env \
  --network=host \
  us-central1-docker.pkg.dev/enclagent-prod/enclagent/agent:latest \
  --no-onboard
ExecStop=/usr/bin/docker stop enclagent
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
